
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../lec03/">
      
      
        <link rel="next" href="../ref01/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.6">
    
    
      
        <title>課題R4 - ソフトウェア演習II</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="http://fonts.googleapis.com/earlyaccess/notosansjp.css">
    
      <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:600,800">
    
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
    
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#r4" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ソフトウェア演習II" class="md-header__button md-logo" aria-label="ソフトウェア演習II" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ソフトウェア演習II
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              課題R4
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../lec00/" class="md-tabs__link">
        
  
    
  
  課題R0

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../lec01/" class="md-tabs__link">
        
  
    
  
  課題R1

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../lec02/" class="md-tabs__link">
        
  
    
  
  課題R2

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../lec03/" class="md-tabs__link">
        
  
    
  
  課題R3

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  課題R4

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../ref01/" class="md-tabs__link">
        
  
    
  
  参考資料1

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ソフトウェア演習II" class="md-nav__button md-logo" aria-label="ソフトウェア演習II" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ソフトウェア演習II
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lec00/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    課題R0
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lec01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    課題R1
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lec02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    課題R2
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lec03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    課題R3
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    課題R4
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    課題R4
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      課題の概要
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      五目並べ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      アルゴリズム
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      データ構造
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      課題1 五目並べゲームの作成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="課題1 五目並べゲームの作成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      局面の初期化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="局面の初期化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      有効な着手の判定
    </span>
  </a>
  
    <nav class="md-nav" aria-label="有効な着手の判定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      盤面の更新
    </span>
  </a>
  
    <nav class="md-nav" aria-label="盤面の更新">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      ゲームの終了判定
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ゲームの終了判定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題5
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題6
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      課題2 最善手を求める思考ルーチンの実装
    </span>
  </a>
  
    <nav class="md-nav" aria-label="課題2 最善手を求める思考ルーチンの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      必勝手
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      ゲーム木の探索
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      プログラムの実装
    </span>
  </a>
  
    <nav class="md-nav" aria-label="プログラムの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題7
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題8
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      処理の流れ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="処理の流れ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題9
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    参考資料1
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      課題の概要
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      五目並べ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      アルゴリズム
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      データ構造
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      課題1 五目並べゲームの作成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="課題1 五目並べゲームの作成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      局面の初期化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="局面の初期化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      有効な着手の判定
    </span>
  </a>
  
    <nav class="md-nav" aria-label="有効な着手の判定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      盤面の更新
    </span>
  </a>
  
    <nav class="md-nav" aria-label="盤面の更新">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      ゲームの終了判定
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ゲームの終了判定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題5
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題6
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      課題2 最善手を求める思考ルーチンの実装
    </span>
  </a>
  
    <nav class="md-nav" aria-label="課題2 最善手を求める思考ルーチンの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      必勝手
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      ゲーム木の探索
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      プログラムの実装
    </span>
  </a>
  
    <nav class="md-nav" aria-label="プログラムの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題7
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題8
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      処理の流れ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="処理の流れ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      演習課題9
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="r4">課題 R4 「五目並べの思考ルーチンの作成」</h1>
<h2 id="_1">課題の概要</h2>
<p>ゲーム木の探索に基づいて最善手を求める思考ルーチンをもつ五目並べゲームをCプログラム <code>five.c</code> として実装せよ．</p>
<h2 id="_2">五目並べ</h2>
<p>五目並べは2人のプレーヤーによって行うゲームである．先手と後手が盤の目にそれぞれ1つずつ石を置いていき，先に5つの石を並べた方が勝ちとなる．
並べる方向は縦，横，斜めのいずれでも良い．
先手の石は黒（●）を，後手の石は白（○）を用いて表す．</p>
<h2 id="_3">アルゴリズム</h2>
<p>本課題で作成する五目並べゲームのプログラムの処理は，次のような流れになる．</p>
<ol>
<li>盤面と手番を初期化する</li>
<li>勝敗が決定するまで以下を繰り返す<ol>
<li>盤面を表示する</li>
<li>着手を入力から読み取る</li>
<li>有効な着手かどうかチェック</li>
<li>有効な着手でなければ，a. に戻る</li>
<li>有効な着手ならば：<ol>
<li>着手に従って盤面を更新</li>
<li>勝敗が決まれば，ゲーム終了</li>
<li>勝敗が決まらなければ，手番を交代して a. に戻る</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="_4">データ構造</h2>
<p>まず，盤面を表現する必要がある．本プログラムでは盤面の大きさおよび目的とする石の並びの個数はマクロ宣言として与えるものとする．
盤面の縦横の大きさは，それぞれ <code>HEIGHT</code> と <code>WIDTH</code> というマクロ宣言で与えるものとし，目的とする石の並びの個数は <code>STONE</code> というマクロ宣言で与えるものとする．
その上で，盤面を整数型の二次元配列 <code>board[WIDTH+2][HEIGHT+2]</code> によって表すものとする．</p>
<p>盤のそれぞれの目の状態は，(1)石が何も置かれていない状態，(2)黒の石が置かれている状態，(3)白の石が置かれている状態の3通りであるので，これらをそれぞれ <code>0</code>，<code>1</code>，<code>2</code> の整数値によって表すこととする．
また，盤面の外周に当たる部分には，番兵データとして値 <code>-1</code> が格納されているものとする．
これは後に作成する関数 <code>check_end()</code> の実装の際に利用する．
例として，<code>WIDTH</code> および <code>HEIGHT</code> がいずれも <code>6</code> の場合の盤面のデータ表現を図１に示す．</p>
<p><center>
<img src="../img/r4/r4-1.png" width="480">
<br>
図1：盤面のデータ表現
</center></p>
<p>ゲームの状態を表すためには，盤面に加えて「現在の手番」の情報が必要となる．
ここでは現在の手番を，整数型の変数 <code>turn</code> を用いて表すものとする．
<code>turn</code> の値は先手であれば <code>1</code>，後手であれば <code>2</code> とする．</p>
<p>盤面の状態と手番を合わせて，ゲームの状態（「局面」とよぶことにする）を表すことができる．
これらは二つ一組で一つの局面を表すものであるため，本演習では局面を表す構造体 <code>PHASE</code> を，<code>typedef</code> を用いて以下のように定義する．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span style="color: #66d9ef">typedef</span><span style="color: #f8f8f2"> </span><span style="color: #66d9ef">struct</span><span style="color: #f8f8f2"> {</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span style="color: #f8f8f2">    </span><span style="color: #66d9ef">int</span><span style="color: #f8f8f2"> board[WIDTH</span><span style="color: #ff4689">+</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">][HEIGHT</span><span style="color: #ff4689">+</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">];</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span style="color: #f8f8f2">    </span><span style="color: #66d9ef">int</span><span style="color: #f8f8f2"> turn;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span style="color: #f8f8f2">} PHASE;</span>
</code></pre></div></td></tr></table></div>
<p>同様に，着手は盤面のx座標とy座標で指定できるため，以下の構造体 <code>MOVE</code> として定義する．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span style="color: #66d9ef">typedef</span><span style="color: #f8f8f2"> </span><span style="color: #66d9ef">struct</span><span style="color: #f8f8f2"> {</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span style="color: #f8f8f2">    </span><span style="color: #66d9ef">int</span><span style="color: #f8f8f2"> x;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span style="color: #f8f8f2">    </span><span style="color: #66d9ef">int</span><span style="color: #f8f8f2"> y;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span style="color: #f8f8f2">} MOVE;</span>
</code></pre></div></td></tr></table></div>
<h2 id="1">課題1 五目並べゲームの作成</h2>
<h3 id="_5">局面の初期化</h3>
<p>まず，局面を初期化するための関数を定義する．
ここで，ゲームの初期状態では，盤面には石が一つも置かれていないものとする．</p>
<h4 id="1_1">演習課題1</h4>
<p>局面を表す <code>PHASE</code> 型の構造体へのポインタ <code>pp</code> を引数として <code>pp</code> が指す局面での盤面と手番を初期化する関数 <code>init_board()</code> と，局面を表す <code>PHASE</code> 型の構造体 <code>p</code> を引数として <code>p</code> が指す局面での盤面を標準入出力に出力する関数 <code>print_board()</code> をそれぞれ作成せよ．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">プロトタイプ宣言</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-2-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-2-2">2</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span style="color: #66d9ef">void</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">init_board</span><span style="color: #f8f8f2">(PHASE </span><span style="color: #ff4689">*</span><span style="color: #f8f8f2">pp);</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span style="color: #66d9ef">void</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">print_board</span><span style="color: #f8f8f2">(PHASE p);</span>
</code></pre></div></td></tr></table></div>
<h3 id="_6">有効な着手の判定</h3>
<p>現在の盤面とどちらの手番であるかという情報があれば，次に石を置く場所のみを与えることで着手を表現することができる．
ここで，着手には有効なものとそうでないものがある．
ここで，以下の条件を満たすとき，その着手は有効であるものとする．</p>
<ol>
<li>着手先が盤面内であること</li>
<li>着手先にまだ石が置かれていないこと</li>
</ol>
<h4 id="2">演習課題2</h4>
<p>現在の局面を表す <code>PHASE</code> 型の構造体 <code>p</code> と着手を表す <code>MOVE</code> 型の構造体 <code>m</code> を引数として，その着手が有効であるかどうかを調べる関数 <code>is_valid_move()</code> を作成せよ．
着手が有効であれば <code>1</code> を，そうでなければ <code>0</code> を返すものとする．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">プロトタイプ宣言</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span style="color: #66d9ef">int</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">is_valid_move</span><span style="color: #f8f8f2">(PHASE p, MOVE m);</span>
</code></pre></div></td></tr></table></div>
<h3 id="_7">盤面の更新</h3>
<p>有効な着手が行われたとき，その着手（すなわち，手番と石を置く場所）に従って盤面を更新する．</p>
<h4 id="3">演習課題3</h4>
<p>現在の局面を表す <code>PHASE</code> 型の構造体へのポインタ <code>pp</code> と着手を表す <code>MOVE</code> 型の構造体 <code>m</code> を引数として，着手に応じて局面を更新する関数 <code>change_phase()</code> を作成せよ．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">プロトタイプ宣言</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span style="color: #66d9ef">void</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">change_phase</span><span style="color: #f8f8f2">(PHASE </span><span style="color: #ff4689">*</span><span style="color: #f8f8f2">pp, MOVE m);</span>
</code></pre></div></td></tr></table></div>
<h3 id="_8">ゲームの終了判定</h3>
<p>最後に，ゲームが終了したかどうかについて判定する必要がある．
ここでゲームが終了するのは，縦・横・斜めのいずれかに定められた個数（前述の通り，マクロ宣言 <code>STONE</code> で与える）の石が並んだときか，もしくは盤面の全ての目に石が置かれたときのいずれかである．</p>
<h4 id="4">演習課題4</h4>
<p>現在の局面を表す <code>PHASE</code> 型の構造体 <code>p</code> を引数とし，盤面の全ての目に石が置かれているかどうかを判定する関数 <code>is_filled()</code> を作成せよ．
盤面が石で埋まっていれば <code>1</code> を，そうでなければ <code>0</code> を返すものとする．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">プロトタイプ宣言</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span style="color: #66d9ef">int</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">is_filled</span><span style="color: #f8f8f2">(PHASE p);</span>
</code></pre></div></td></tr></table></div>
<h4 id="5">演習課題5</h4>
<p>現在の局面を表す <code>PHASE</code> 型の構造体 <code>p</code> と着手を表す <code>MOVE</code> 型の構造体 <code>m</code> を引数として，その着手によりゲームが終了したかどうかを判定する関数 <code>check_end()</code> を作成せよ．
関数の戻り値は，先手の勝ちならば <code>1</code> を，後手の勝ちならば <code>2</code> を，終了していなければ <code>0</code> をそれぞれ返すものとする．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">プロトタイプ宣言</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span style="color: #66d9ef">int</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">check_end</span><span style="color: #f8f8f2">(PHASE p, MOVE m);</span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">check_end の実現方針</p>
<p><code>check_end</code> の実装においては，着手先を起点として，</p>
<ol>
<li>上および下方向</li>
<li>左および右方向</li>
<li>右上および左下方向</li>
<li>右下および左上方向</li>
</ol>
<p>の4つの軸について，定められた個数の石の並びがあるか否かを判定すればよい．</p>
<p><img src="../img/r4/r4-2.png" width="480"></p>
<p>ここで，盤面の外周に番兵データを格納しているため，着手先の場所が盤面の端であるか否かを考える必要はない．</p>
</div>
<h4 id="6">演習課題6</h4>
<p>これまでに作成した関数を用いて，五目並べゲームを行うCプログラムを作成せよ．
ここでは先手と後手のどちらの着手も人間の手によって行うものとする．</p>
<h2 id="2_1">課題2 最善手を求める思考ルーチンの実装</h2>
<p>五目並べのように，偶然性に左右されず，かつ相手の着手が全て予想できるゲームを完全情報ゲームと呼ぶ．
完全情報ゲームにおいては，ある局面で存在する着手に対して，それぞれの着手を行った後の局面を求める（先読みする）ことができる．
そして，着手後の局面についても同様に，複数の着手が存在することから，局面の変化を木構造として表すことができる．
このような局面の変化を表す木をゲーム木と呼ぶ．
ゲーム木の節はそれぞれの局面を表し，葉は勝敗の決まった局面を表す．</p>
<p>本課題では処理の簡略化のため，盤面の大きさおよび目的とする石の個数は３×３，すなわち三目並べとする．
図3は，三目並べのある局面を始点として，ゲームの終了までを表すゲーム木である．</p>
<p><center>
<img src="../img/r4/r4-3.png" width="480">
<br>
図3：ゲーム木
</center></p>
<h3 id="_9">必勝手</h3>
<p>もし，ある局面におけるゲーム木を全探索することができれば，自分が必ず勝てるような着手が存在するかどうかを求めることができる．
ここでは必ず勝てる着手を必勝手と呼ぶことにする．
ある局面における着手 <script type="math/tex">(x, y)</script> がプレイヤー <script type="math/tex">c</script> にとっての必勝手であるかどうかは，以下のように求められる．</p>
<ul>
<li>着手 <script type="math/tex">(x, y)</script> によりゲームが終了するとき<ul>
<li>ゲームが <script type="math/tex">c</script> の勝利で終了するならば，着手 <script type="math/tex">(x, y)</script> は <script type="math/tex">c</script> の必勝手である．(ケース1)</li>
<li>ゲームが <script type="math/tex">c</script> の勝利以外（相手の勝利もしくは引き分け）で終了するならば，着手 <script type="math/tex">(x, y)</script> は <script type="math/tex">c</script> の必勝手ではない．(ケース2)</li>
</ul>
</li>
<li>着手 <script type="math/tex">(x, y)</script> によりゲームが終了しないとき<ul>
<li>着手 <script type="math/tex">(x, y)</script> 後の局面が <script type="math/tex">c</script> の手番で，かつその局面で <script type="math/tex">c</script> の必勝手が一つでも存在すれば，着手 <script type="math/tex">(x, y)</script> は <script type="math/tex">c</script> の必勝手である．(ケース3)</li>
<li>着手 <script type="math/tex">(x, y)</script> 後の局面が <script type="math/tex">c</script> の手番でなく，かつその局面で <script type="math/tex">c</script> の必勝手でない着手が一つでも存在すれば，着手 <script type="math/tex">(x, y)</script> は <script type="math/tex">c</script> の必勝手ではない．(ケース4)</li>
<li>上記以外の場合は，着手 <script type="math/tex">(x, y)</script> は <script type="math/tex">c</script> の必勝手ではない．</li>
</ul>
</li>
</ul>
<p>その着手でゲームが終了するならば，ケース1およびケース2を満たすか否かで必勝手かどうかは決定される．
ゲームが終了しないとき，着手後の局面が自分の手番ならばケース3に従い，相手の手番ならばケース4に従って，その着手が必勝手かどうか決定する．</p>
<h3 id="_10">ゲーム木の探索</h3>
<p>ゲーム木を全探索できると仮定するならば，ある着手が先手と後手どちらの必勝手であるか，あるいは引き分けかを以下のアルゴリズムで求めることができる．</p>
<div class="admonition tip">
<p class="admonition-title">ゲーム木の探索アルゴリズム</p>
<p><ul style="list-style-type: none;">
<li> 入力：
    <ul style="list-style-type: none;">
    <li> 局面 <code>p</code>，着手 <code>(x, y)</code>
    </ul>
<li> 出力：
    <ul style="list-style-type: none;">
    <li> 着手が先手の必勝手→<code>1</code>
    <li> 着手が後手の必勝手→<code>2</code>
    <li> どちらでもない→<code>0</code>
    </ul>
</ul></p>
<hr />
<p><ul style="list-style-type: none;">
<li> <span class="reserved_word">if </span> 局面 <code>p</code> で着手 <code>(x, y)</code> によりゲームが終了するならば
    <ul style="list-style-type: none;">
    <li> <span class="reserved_word">if </span> 先手の勝利ならば，着手 <code>(x, y)</code> は先手の必勝手である
    <li> <span class="reserved_word">else if </span> 後手の勝利ならば，着手 <code>(x, y)</code> は後手の必勝手である
    <li> <span class="reserved_word">else if </span> 引き分けならば，着手 <code>(x, y)</code> はどちらの必勝手でもない
    </ul>
<li> <span class="reserved_word">else if </span> 局面 <code>p</code> で着手 <code>(x, y)</code> によりゲームが終了しないならば
    <ul style="list-style-type: none;">
    <li> 着手 <code>(x, y)</code> により局面 <code>p</code> を局面 <code>p’</code> へと更新する
    <li> 局面 <code>p’</code> で可能な着手 <code>moves</code> を全て求める
    <li> <span class="reserved_word">if </span> 局面 <code>p’</code> が先手の手番ならば
        <ul style="list-style-type: none;">
        <li> <span class="reserved_word">for </span> <code>moves</code> 内の全ての着手 <code>(x’, y’)</code> について
            <ul style="list-style-type: none;">
            <li> <span class="reserved_word">if </span> 一つでも先手の必勝手ならば，着手 <code>(x, y)</code> もまた先手の必勝手である
            <li> <span class="reserved_word">else if </span> 全てが後手の必勝手ならば，着手 <code>(x, y)</code> は後手の必勝手である
            <li> <span class="reserved_word">else </span> 着手 <code>(x, y)</code> はどちらの必勝手でもない
            </ul>
        </ul>
    <li> <span class="reserved_word">else if </span> 局面 <code>p’</code> が後手の手番ならば
        <ul style="list-style-type: none;">
        <li> <span class="reserved_word">for </span> <code>moves</code> 内の全ての着手 <code>(x’, y’)</code> について
            <ul style="list-style-type: none;">
            <li> <span class="reserved_word">if </span> 一つでも後手の必勝手ならば，着手 <code>(x, y)</code> もまた後手の必勝手である
            <li> <span class="reserved_word">else if </span> 全てが先手の必勝手ならば，着手 <code>(x, y)</code> は先手の必勝手である
            <li> <span class="reserved_word">else </span> 着手 <code>(x, y)</code> はどちらの必勝手でもない
            </ul>
        </ul>
    </ul>
</ul></p>
</div>
<p>ここで，このアルゴリズムを見てみると，「着手後の局面 <code>p’</code> における着手がどちらの必勝手であるか」を調べている．
つまり，ある着手が必勝手であるかどうかを調べるために，着手後の局面における必勝手に関する情報が必要ということになる．
これは関数の再帰呼び出しを用いることで実現可能な手続きである．
（五目並べでは，盤面の全ての目に石が置かれた時点でゲームが終了するので，このアルゴリズムが終了することは保証されている．）</p>
<h3 id="_11">プログラムの実装</h3>
<p>これらを踏まえて，以下のような関数を定義することでこのアルゴリズムを実現し，ゲーム木の探索を行う思考ルーチンを作成する．</p>
<h4 id="7">演習課題7</h4>
<p>現在の局面を表す <code>PHASE</code> 型の構造体 <code>p</code> と着手を格納するための <code>MOVE</code> 型の配列 <code>moves</code> を引数として，その局面で可能な全ての着手を求める関数 <code>find_move()</code> を定義せよ．
番兵として，配列の最後には <code>(-1, -1)</code> のデータを格納すること．</p>
<p>例えば，図3の始めの盤面に対して <code>find_move</code> を実行した場合に得られる配列 <code>moves</code> の中身は <code>((1,1), (1,3), (3,3), (-1,-1),...)</code> となる．
配列 <code>moves</code> には最大で <code>WIDTH*HEIGHT</code> 個の着手が格納される可能性があるので，その要素数は <code>WIDTH*HEIGHT+1</code> となる．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">プロトタイプ宣言</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span style="color: #66d9ef">void</span><span style="color: #f8f8f2"> find_move(PHASE p, MOVE moves[])</span>
</code></pre></div></td></tr></table></div>
<h4 id="8">演習課題8</h4>
<p>現在の局面を表す <code>PHASE</code> 型の構造体 <code>p</code>，着手を表す <code>MOVE</code> 型の構造体 <code>m</code> を引数として，その着手が先手と後手どちらの必勝手であるか，あるいはどちらでもないかを求める関数 <code>check_win()</code> を定義せよ．
戻り値は，先手の必勝手であれば <code>1</code>，後手の必勝手であれば <code>2</code>，どちらでもなければ <code>0</code> とする．</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">プロトタイプ宣言</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span style="color: #66d9ef">int</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">check_win</span><span style="color: #f8f8f2">(PHASE p, MOVE m);</span>
</code></pre></div></td></tr></table></div>
<h3 id="_12">処理の流れ</h3>
<p>上記の関数を用いて，図3のゲーム木の探索を行った場合の処理の流れについて述べる（黒手番）．</p>
<p>このゲーム木の初期局面 <code>p0</code> においては</p>
<ul>
<li>左上 <code>(1, 1)</code></li>
<li>左下 <code>(1, 3)</code></li>
<li>右下 <code>(3, 3)</code></li>
</ul>
<p>の3つのマスへの着手が可能である．</p>
<ul>
<li>
<p>まず，着手 <code>(1,1)</code> について述べる．</p>
<p><code>check_win(p0, (1,1))</code> を実行すると，着手後の局面 <code>p1</code> でゲームは終了しておらず，可能な着手は左下 <code>(1,3)</code> と右下 <code>(3,3)</code> の二つである．
よって，これらの2つの着手について再帰的に <code>check_win</code> を実行する．</p>
<p><code>check_win(p1, (1,3))</code> を実行すると，着手 <code>(1,3)</code> 後の局面 <code>p2</code> はまだゲームが終了しておらず，可能な着手は <code>(3,3)</code> のみである．
着手 <code>(3,3)</code> 後の <code>p3</code> は引き分けなので <code>check_win(p2, (3,3))</code> の戻り値は <code>0</code> となり，<code>check_win(p1, (1,3))</code> の戻り値も同様に <code>0</code> となる．</p>
<p>また，着手 <code>(3, 3)</code> 後の局面 <code>p4</code> および <code>p5</code> も同じく引き分けとなり，<code>check_win(p1, (3,3))</code> および <code>check_win(p4, (1,3))</code> の戻り値も <code>0</code> となる．</p>
<p>したがって，局面 <code>p1</code> における着手 <code>(1,3)</code> および <code>(3,3)</code> の結果はいずれも引き分けであり，<code>check_win(p0, (1,1))</code> の戻り値も <code>0</code> となる．</p>
</li>
<li>
<p>次に，着手 <code>(1,3)</code> について述べる．</p>
<p><code>check_win(p0, (1,3))</code> を実行すると，着手後の局面 <code>p6</code> でゲームは終了しておらず，可能な着手は左上 <code>(1,1)</code> と右下 <code>(3,3)</code> の二つである．</p>
<p>着手 <code>(1,1)</code> 後の局面 <code>p7</code> はゲームが終了しておらず，可能な着手は <code>(3,3)</code> のみである．
着手後の <code>p8</code> は先手の勝ちとなるので <code>check_win(p7, (3,3))</code> の戻り値は <code>1</code> となり，<code>check_win(p6, (1,1))</code> の戻り値も同様に <code>1</code> となる．</p>
<p>また，着手 <code>(3,3)</code> 後の局面 <code>p9</code> および <code>p10</code> も同じく先手の勝ちとなり，<code>check_win(p6, (3,3))</code> および <code>check_win(p9, (1,1))</code> の戻り値も <code>1</code> となる．</p>
<p>したがって，局面 <code>p6</code> における着手 <code>(1,1)</code> および <code>(3,3)</code> はいずれも先手の勝ちとなる．
後手の手番である局面 <code>p6</code> で全ての着手が先手の勝ちとなるので，<code>check_win(p0, (1,3))</code> の戻り値は <code>1</code> となる．</p>
</li>
<li>
<p>最後に，着手 <code>(3, 3)</code> について述べる．</p>
<p><code>check_win(p0, (3,3))</code> を実行すると，着手後の局面 <code>p11</code> でゲームは終了しておらず，可能な着手は左上 <code>(1,1)</code> と左下<code>(1,3)</code> の二つである．</p>
<p>着手 <code>(1,1)</code> 後の局面 <code>p12</code> はゲームが終了しておらず，可能な着手は <code>(1, 3)</code> のみである．
着手後の <code>p13</code> は先手の勝ちとなるので <code>check_win(p12, (1,3))</code> の戻り値は <code>1</code> となり，<code>check_win(p11, (1,1))</code> の戻り値も同様に <code>1</code> となる．</p>
<p>また，着手 <code>(1,3)</code> 後の局面 <code>p14</code> はゲームが終了しておらず，可能な着手は <code>(1,1)</code> のみで着手後の <code>p15</code> は引き分けであるので，<code>check_win(p11, (1,3))</code> および <code>check_win(p14, (1,1))</code> の戻り値は <code>0</code> となる．</p>
<p>したがって，局面 <code>p11</code> において着手 <code>(1, 1)</code> は先手の勝ちであり，<code>(3,3)</code> は引き分けである．
後手の手番である局面 <code>p11</code> で後手の勝ちがなく，引き分けの着手があるので，<code>check_win(p0, (3,3))</code> の戻り値は <code>0</code> となる．</p>
</li>
</ul>
<p>最終的に，局面 <code>p0</code> で先手の勝ちとなる着手 <code>(1,3)</code> が存在するので，<code>(1,3)</code> が必勝手ということがわかる．</p>
<h4 id="9">演習課題9</h4>
<p>上記の関数を用いて，コンピュータ側が必勝局面になる着手を選択するような思考ルーチンをもつ三目並べゲームをプログラムとして作成せよ． </p>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "navigation.tabs", "navigation.tabs.sticky"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.e1c3ead8.min.js"></script>
      
        <script src="../js/extra.js"></script>
      
        <script src="../js/config.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS_CHTML"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
      
    
  </body>
</html>